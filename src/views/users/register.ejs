<!DOCTYPE html>
<html lang="en">

   <%- include('../partials/head.ejs') %> 

<body>

   <%- include('../partials/header.ejs') %> 

    <main class="userMain">
        <div class="datos">
            <div class="loginDatos">
                <div class="inReg"> 
                    <h4>  Inicio /  <strong>  Registro </strong></h4>
                </div>
                <div class="loginCon">
                    <h2>Registrate</h2>

                    <%- include('../partials/buttonSN.ejs') %> 
                    
                </div>
                <div class="register">
                    <form action="/users/register" method="POST" class="registerForm" enctype="multipart/form-data">
                        <div class="avatar">
                            <img src="/images/users/avatar-default-image.jpg" class="avatarPreview" id="avatarPreview">
                            <label for="avatar"> Imagen de perfil </label>
                            <input type="file" name="avatar" id="avatar" placeholder="Imagen de perfil" multiple >
                            <% if (locals.errors && errors.avatar) { %>
                                <p class="errorStyle"> <%= errors.avatar.msg %> </p>
                            <% } %>
                            <div class="errorMessage" id="avatarError"></div>
                        </div>
                        <div>
                            <input type="text" name="firstName" id="firstName" 
                            placeholder="Nombre" minLength="2" 
                            value="<%= locals.oldData ? oldData.firstName : null %>">
                            <% if (locals.errors && errors.firstName) { %>
                                <p class="errorStyle"> <%= errors.firstName.msg %> </p>
                            <% } %>
                            <div class="errorMessage" id="firstNameError"></div>
                        </div>
                        <div>
                            <input type="text" name="lastName" id="lastName" 
                            placeholder="Apellido" minLength="2" 
                            value="<%= locals.oldData ? oldData.lastName : null %>">
                            <% if (locals.errors && errors.lastName) { %>
                                <p class="errorStyle"> <%= errors.lastName.msg %> </p>
                            <% } %>
                            <div class="errorMessage" id="lastNameError"></div>
                        </div>
                        <div>
                            <input type="text" name="userName" id="userName" 
                            placeholder="Nombre de usuario"  
                            value="<%= locals.oldData ? oldData.userName : null %>">
                            <% if (locals.errors && errors.userName) { %>
                                <p class="errorStyle"> <%= errors.userName.msg %> </p>
                            <% } %>
                            <div class="errorMessage" id="userNameError"></div>
                        </div>
                        <div>
                            <input type="email" name="email" id="email" 
                            placeholder="Correo electrónico" 
                            value="<%= locals.oldData ? oldData.email : null %>">
                            <% if (locals.errors && errors.email) { %>
                                <p class="errorStyle"> <%= errors.email.msg %> </p>
                            <% } %>
                            <div class="errorMessage" id="emailError"></div>
                        </div>
                        <div>
                            <input type="password" name="password" id="password" placeholder="Contraseña"></input>
                            <% if (locals.errors && errors.password) { %>
                                <p class="errorStyle"> <%= errors.password.msg %> </p>
                            <% } %>
                            <div class="errorMessage" id="passwordError"></div>
                        </div>
                        <div>
                            <input type="password" name="confirmPassword" id="confirmPassword" placeholder="Confirmar contraseña" ></input>
                            <% if (locals.errors && errors.confirmPassword) { %>
                                <p class="errorStyle"> <%= errors.confirmPassword.msg %> </p>
                            <% } %>
                            <div class="errorMessage" id="confirmPasswordError"></div>
                        </div>

                        <%- include('../partials/reCaptcha.ejs') %> 
                        
                        <button type="submit" class="crearCuenta"> Crear cuenta </button>
                    </form>   
                    <p class="yaTenesCuenta"> <a href="/users/login">¿Ya tienes cuenta? Iniciar sesión</a></p>
                </div>  
            </div>
        </div>
    </main>

    <%- include('../partials/footer.ejs') %> 

    <script src="/js/header.js"> </script>
    <script src="/js/registerValidator.js"></script>
    <script src="/js/avatarPreview.js"></script>
    <script src="/js/cart/showCartIndex.js"></script>
</body>
</html>